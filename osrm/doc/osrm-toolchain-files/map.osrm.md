- [.osrm](#osrm)
  - [List](#list)
  - [osrm_fingerprint.meta](#osrmfingerprintmeta)
  - [/extractor/nodes, /extractor/nodes.meta](#extractornodes-extractornodesmeta)
    - [Layout](#layout)
    - [Implementation](#implementation)


# .osrm
This is temporary file generated by `osrm-extract`, which contains original filtered graph data (nodes and edges).     

## List

```bash
tar tvf nevada-latest.osrm 
-rw-rw-r--  0 0      0           8 Jan  1  1970 osrm_fingerprint.meta
-rw-rw-r--  0 0      0           8 Jan  1  1970 /extractor/nodes.meta
-rw-rw-r--  0 0      0    18275776 Jan  1  1970 /extractor/nodes
-rw-rw-r--  0 0      0           8 Jan  1  1970 /extractor/barriers.meta
-rw-rw-r--  0 0      0         608 Jan  1  1970 /extractor/barriers
-rw-rw-r--  0 0      0           8 Jan  1  1970 /extractor/traffic_lights.meta
-rw-rw-r--  0 0      0       16144 Jan  1  1970 /extractor/traffic_lights
-rw-rw-r--  0 0      0           8 Jan  1  1970 /extractor/edges.meta
-rw-rw-r--  0 0      0    39504672 Jan  1  1970 /extractor/edges
-rw-rw-r--  0 0      0           8 Jan  1  1970 /extractor/annotations.meta
-rw-rw-r--  0 0      0     1355088 Jan  1  1970 /extractor/annotations
```

## osrm_fingerprint.meta
- [osrm_fingerprint.meta](./fingerprint.md)

## /extractor/nodes, /extractor/nodes.meta

### Layout
![](graph/map.osrm.extractor.nodes.png)

### Implementation

OSM Nodes will be written into `.osrm` once OSM parsed by [`Extractor::ParseOSMData()`](https://github.com/Telenav/osrm-backend/blob/master-telenav/src/extractor/extractor.cpp#L398) in `osrm-extract`. They'll be written by [`ExtractionContainers::WriteNodes()`](https://github.com/Telenav/osrm-backend/blob/6283c6074066f98e6d4a9f774f21ea45407c0d52/src/extractor/extraction_containers.cpp#L586:28) which will be called by [`ExtractionContainers::PrepareData()`](https://github.com/Telenav/osrm-backend/blob/6283c6074066f98e6d4a9f774f21ea45407c0d52/src/extractor/extraction_containers.cpp#L131:28).    Every `Node` written into `/extractor/nodes` is a [`QueryNode` structure](https://github.com/Telenav/osrm-backend/blob/6283c6074066f98e6d4a9f774f21ea45407c0d52/include/extractor/query_node.hpp#L16).    

```c++
struct QueryNode
{
    using key_type = OSMNodeID;      // type of NodeID
    using value_type = std::int32_t; // type of lat,lons

    util::FixedLongitude lon;   // [Jay] int32 lon, e.g. -120011751 (i.e. -120.011751)
    util::FixedLatitude lat;    // [Jay] int32 lat, e.g. 39443340 (i.e. 39.443340)
    key_type node_id;           // [Jay] uint64 Node ID from OSM PBF, e.g. 26798725

    // [Jay] ...
}
```